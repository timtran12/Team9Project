{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useImperativeHandle, useCallback } from 'react';\nimport kebabCase from 'lodash/kebabCase';\nimport trim from 'lodash/trim';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport omit from 'lodash/omit';\nimport find from 'lodash/find';\nimport { findNodeOfTree, filterNodesOfTree } from '../utils/treeUtils';\nimport { KEY_VALUES, useClassNames, shallowEqual, reactToString, placementPolyfill } from '../utils';\nvar defaultNodeKeys = {\n  valueKey: 'value',\n  childrenKey: 'children'\n};\nexport function createConcatChildrenFunction(node, nodeValue, nodeKeys) {\n  if (nodeKeys === void 0) {\n    nodeKeys = defaultNodeKeys;\n  }\n\n  var _nodeKeys = nodeKeys,\n      valueKey = _nodeKeys.valueKey,\n      childrenKey = _nodeKeys.childrenKey;\n  return function (data, children) {\n    if (nodeValue) {\n      node = findNodeOfTree(data, function (item) {\n        return nodeValue === item[valueKey];\n      });\n    }\n\n    node[childrenKey] = children;\n    return data.concat([]);\n  };\n}\nexport function shouldDisplay(label, searchKeyword) {\n  if (!trim(searchKeyword)) {\n    return true;\n  }\n\n  var keyword = searchKeyword.toLocaleLowerCase();\n\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n  } else if ( /*#__PURE__*/React.isValidElement(label)) {\n    var nodes = reactToString(label);\n    return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n  }\n\n  return false;\n}\n/**\n * The className of the assembled Toggle is on the Picker.\n */\n\nexport function usePickerClassName(props) {\n  var _withClassPrefix;\n\n  var name = props.name,\n      classPrefix = props.classPrefix,\n      className = props.className,\n      placement = props.placement,\n      appearance = props.appearance,\n      cleanable = props.cleanable,\n      block = props.block,\n      disabled = props.disabled,\n      countable = props.countable,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      hasValue = props.hasValue,\n      rest = _objectWithoutPropertiesLoose(props, [\"name\", \"classPrefix\", \"className\", \"placement\", \"appearance\", \"cleanable\", \"block\", \"disabled\", \"countable\", \"readOnly\", \"plaintext\", \"hasValue\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge;\n\n  var classes = merge(className, withClassPrefix(name, appearance, 'toggle-wrapper', (_withClassPrefix = {}, _withClassPrefix[\"placement-\" + kebabCase(placementPolyfill(placement))] = placement, _withClassPrefix['read-only'] = readOnly, _withClassPrefix['has-value'] = hasValue, _withClassPrefix.cleanable = hasValue && cleanable, _withClassPrefix.block = block, _withClassPrefix.disabled = disabled, _withClassPrefix.countable = countable, _withClassPrefix.plaintext = plaintext, _withClassPrefix)));\n  var usedClassNamePropKeys = Object.keys(omit(props, [].concat(Object.keys(rest || {}), ['disabled', 'readOnly', 'plaintext'])));\n  return [classes, usedClassNamePropKeys];\n}\n/**\n * Handling keyboard events...\n * @param event Keyboard event object\n * @param events Event callback functions\n */\n\nexport function onMenuKeyDown(event, events) {\n  var down = events.down,\n      up = events.up,\n      enter = events.enter,\n      del = events.del,\n      esc = events.esc,\n      right = events.right,\n      left = events.left;\n\n  switch (event.key) {\n    // down\n    case KEY_VALUES.DOWN:\n      down === null || down === void 0 ? void 0 : down(event);\n      event.preventDefault();\n      break;\n    // up\n\n    case KEY_VALUES.UP:\n      up === null || up === void 0 ? void 0 : up(event);\n      event.preventDefault();\n      break;\n    // enter\n\n    case KEY_VALUES.ENTER:\n      enter === null || enter === void 0 ? void 0 : enter(event);\n      event.preventDefault();\n      break;\n    // delete\n\n    case KEY_VALUES.BACKSPACE:\n      del === null || del === void 0 ? void 0 : del(event);\n      break;\n    // esc | tab\n\n    case KEY_VALUES.ESC:\n    case KEY_VALUES.TAB:\n      esc === null || esc === void 0 ? void 0 : esc(event);\n      break;\n    // left arrow\n\n    case KEY_VALUES.LEFT:\n      left === null || left === void 0 ? void 0 : left(event);\n      break;\n    // right arrow\n\n    case KEY_VALUES.RIGHT:\n      right === null || right === void 0 ? void 0 : right(event);\n      break;\n\n    default:\n  }\n}\n/**\n * A hook that manages the focus state of the option.\n * @param defaultFocusItemValue\n * @param props\n */\n\nexport var useFocusItemValue = function useFocusItemValue(defaultFocusItemValue, props) {\n  var _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$focusableQuery = props.focusableQueryKey,\n      focusableQueryKey = _props$focusableQuery === void 0 ? '[data-key][aria-disabled=\"false\"]' : _props$focusableQuery,\n      _props$defaultLayer = props.defaultLayer,\n      defaultLayer = _props$defaultLayer === void 0 ? 0 : _props$defaultLayer,\n      data = props.data,\n      target = props.target,\n      rtl = props.rtl,\n      callback = props.callback;\n\n  var _useState = useState(defaultFocusItemValue),\n      focusItemValue = _useState[0],\n      setFocusItemValue = _useState[1];\n\n  var _useState2 = useState(defaultLayer),\n      layer = _useState2[0],\n      setLayer = _useState2[1];\n\n  var _useState3 = useState([]),\n      keys = _useState3[0],\n      setKeys = _useState3[1];\n  /**\n   * Get the elements visible in all options.\n   */\n\n\n  var getFocusableMenuItems = useCallback(function () {\n    if (!target) {\n      return [];\n    }\n\n    var menu = isFunction(target) ? target() : target;\n    var currentKeys = keys;\n\n    if (currentKeys.length === 0) {\n      var _Array$from;\n\n      currentKeys = (_Array$from = Array.from(menu === null || menu === void 0 ? void 0 : menu.querySelectorAll(focusableQueryKey))) === null || _Array$from === void 0 ? void 0 : _Array$from.map(function (item) {\n        var _item$dataset;\n\n        return item === null || item === void 0 ? void 0 : (_item$dataset = item.dataset) === null || _item$dataset === void 0 ? void 0 : _item$dataset.key;\n      });\n      setKeys(currentKeys);\n    }\n\n    if (currentKeys.length === 0) {\n      return [];\n    } // 1. It is necessary to traverse the `keys` instead of `data` here to preserve the order of the array.\n    // 2. The values ​​in `keys` are all string, so the corresponding value of `data` should also be converted to string\n\n\n    return currentKeys.map(function (key) {\n      return find(data, function (i) {\n        return \"\" + i[valueKey] === key;\n      });\n    });\n  }, [data, focusableQueryKey, keys, target, valueKey]);\n  /**\n   * Get the index of the focus item.\n   */\n\n  var findFocusItemIndex = useCallback(function (callback) {\n    var items = getFocusableMenuItems();\n\n    for (var i = 0; i < items.length; i += 1) {\n      var _items$i;\n\n      if (shallowEqual(focusItemValue, (_items$i = items[i]) === null || _items$i === void 0 ? void 0 : _items$i[valueKey])) {\n        callback(items, i);\n        return;\n      }\n    }\n\n    callback(items, -1);\n  }, [focusItemValue, getFocusableMenuItems, valueKey]);\n  var focusNextMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index + 2 > items.length ? 0 : index + 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var focusPrevMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index === 0 ? items.length - 1 : index - 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var getSubMenuKeys = useCallback(function (nextLayer) {\n    var menu = isFunction(target) ? target() : target;\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + nextLayer + \"\\\"]\");\n\n    if (subMenu) {\n      var _Array$from2;\n\n      return (_Array$from2 = Array.from(subMenu.querySelectorAll(focusableQueryKey))) === null || _Array$from2 === void 0 ? void 0 : _Array$from2.map(function (item) {\n        var _item$dataset2;\n\n        return item === null || item === void 0 ? void 0 : (_item$dataset2 = item.dataset) === null || _item$dataset2 === void 0 ? void 0 : _item$dataset2.key;\n      });\n    }\n\n    return null;\n  }, [focusableQueryKey, target]);\n  var focusNextLevelMenu = useCallback(function (event) {\n    var nextLayer = layer + 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      setFocusItemValue(nextKeys[0]);\n      callback === null || callback === void 0 ? void 0 : callback(nextKeys[0], event);\n    }\n  }, [callback, getSubMenuKeys, layer]);\n  var focusPrevLevelMenu = useCallback(function (event) {\n    var nextLayer = layer - 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      var _focusItem$parent;\n\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      var focusItem = findNodeOfTree(data, function (item) {\n        return item[valueKey] === focusItemValue;\n      });\n      var parentItemValue = focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey];\n\n      if (parentItemValue) {\n        setFocusItemValue(parentItemValue);\n        callback === null || callback === void 0 ? void 0 : callback(parentItemValue, event);\n      }\n    }\n  }, [callback, data, focusItemValue, getSubMenuKeys, layer, valueKey]);\n  var handleKeyDown = useCallback(function (event) {\n    var _onMenuKeyDown;\n\n    onMenuKeyDown(event, (_onMenuKeyDown = {\n      down: focusNextMenuItem,\n      up: focusPrevMenuItem\n    }, _onMenuKeyDown[rtl ? 'left' : 'right'] = focusNextLevelMenu, _onMenuKeyDown[rtl ? 'right' : 'left'] = focusPrevLevelMenu, _onMenuKeyDown));\n  }, [focusNextLevelMenu, focusNextMenuItem, focusPrevLevelMenu, focusPrevMenuItem, rtl]);\n  return {\n    focusItemValue: focusItemValue,\n    setFocusItemValue: setFocusItemValue,\n    layer: layer,\n    setLayer: setLayer,\n    keys: keys,\n    setKeys: setKeys,\n    onKeyDown: handleKeyDown\n  };\n};\n/**\n * A hook to control the toggle keyboard operation\n * @param props\n */\n\nexport var useToggleKeyDownEvent = function useToggleKeyDownEvent(props) {\n  var _props$toggle = props.toggle,\n      toggle = _props$toggle === void 0 ? true : _props$toggle,\n      triggerRef = props.triggerRef,\n      targetRef = props.targetRef,\n      overlayRef = props.overlayRef,\n      searchInputRef = props.searchInputRef,\n      active = props.active,\n      onExit = props.onExit,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onKeyDown = props.onKeyDown,\n      onMenuKeyDown = props.onMenuKeyDown,\n      onMenuPressEnter = props.onMenuPressEnter,\n      onMenuPressBackspace = props.onMenuPressBackspace;\n  var handleClose = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, triggerRef]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen, triggerRef]);\n  var handleToggleDropdown = useCallback(function () {\n    if (active) {\n      handleClose();\n      return;\n    }\n\n    handleOpen();\n  }, [active, handleOpen, handleClose]);\n  var onToggle = useCallback(function (event) {\n    if (event.target === (targetRef === null || targetRef === void 0 ? void 0 : targetRef.current)) {\n      // enter\n      if (toggle && event.key === KEY_VALUES.ENTER) {\n        handleToggleDropdown();\n      } // delete\n\n\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onExit === null || onExit === void 0 ? void 0 : onExit(event);\n      }\n    }\n\n    if (overlayRef !== null && overlayRef !== void 0 && overlayRef.current) {\n      // The keyboard operation callback on the menu.\n      onMenuKeyDown === null || onMenuKeyDown === void 0 ? void 0 : onMenuKeyDown(event);\n\n      if (event.key === KEY_VALUES.ENTER) {\n        onMenuPressEnter === null || onMenuPressEnter === void 0 ? void 0 : onMenuPressEnter(event);\n      }\n      /**\n       * There is no callback when typing the Backspace key in the search box.\n       * The default is to remove search keywords\n       */\n\n\n      if (event.key === KEY_VALUES.BACKSPACE && event.target !== (searchInputRef === null || searchInputRef === void 0 ? void 0 : searchInputRef.current)) {\n        onMenuPressBackspace === null || onMenuPressBackspace === void 0 ? void 0 : onMenuPressBackspace(event);\n      } // The search box gets focus when typing characters and numbers.\n\n\n      if (event.key.length === 1 && /\\w/.test(event.key)) {\n        var _searchInputRef$curre;\n\n        searchInputRef === null || searchInputRef === void 0 ? void 0 : (_searchInputRef$curre = searchInputRef.current) === null || _searchInputRef$curre === void 0 ? void 0 : _searchInputRef$curre.focus();\n      }\n    }\n\n    if (event.key === KEY_VALUES.ESC || event.key === KEY_VALUES.TAB) {\n      handleClose();\n    } // Native event callback\n\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  }, [handleClose, handleToggleDropdown, overlayRef, onExit, onKeyDown, onMenuKeyDown, onMenuPressBackspace, onMenuPressEnter, toggle, targetRef, searchInputRef]);\n  return onToggle;\n};\n/**\n * A hook that handles search filter options\n * @param props\n */\n\nexport function useSearch(props) {\n  var labelKey = props.labelKey,\n      data = props.data,\n      searchBy = props.searchBy,\n      callback = props.callback; // Use search keywords to filter options.\n\n  var _useState4 = useState(''),\n      searchKeyword = _useState4[0],\n      setSearchKeyword = _useState4[1];\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n\n  var checkShouldDisplay = useCallback(function (item, keyword) {\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n\n    var _keyword = isUndefined(keyword) ? searchKeyword : keyword;\n\n    if (typeof searchBy === 'function') {\n      return searchBy(_keyword, label, item);\n    }\n\n    return shouldDisplay(label, _keyword);\n  }, [labelKey, searchBy, searchKeyword]);\n  var updateFilteredData = useCallback(function (nextData) {\n    setFilteredData(filterNodesOfTree(nextData, function (item) {\n      return checkShouldDisplay(item);\n    }));\n  }, [checkShouldDisplay]);\n\n  var _useState5 = useState(filterNodesOfTree(data, function (item) {\n    return checkShouldDisplay(item);\n  })),\n      filteredData = _useState5[0],\n      setFilteredData = _useState5[1];\n\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterNodesOfTree(data, function (item) {\n      return checkShouldDisplay(item, searchKeyword);\n    });\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n  };\n\n  return {\n    searchKeyword: searchKeyword,\n    filteredData: filteredData,\n    updateFilteredData: updateFilteredData,\n    setSearchKeyword: setSearchKeyword,\n    checkShouldDisplay: checkShouldDisplay,\n    handleSearch: handleSearch\n  };\n}\n/**\n * A hook of the exposed method of Picker\n *\n * {\n *   root: Element;\n *   overlay: Element;\n *   target?: Element;\n *   updatePosition:() => void;\n *   open:() => void;\n *   close:() => void;\n * }\n * @param ref\n * @param params\n */\n\nexport function usePublicMethods(ref, _ref, disabled) {\n  var triggerRef = _ref.triggerRef,\n      overlayRef = _ref.overlayRef,\n      targetRef = _ref.targetRef,\n      rootRef = _ref.rootRef;\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current3;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : _triggerRef$current3.open();\n  }, [triggerRef]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current4;\n\n    (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.close();\n  }, [triggerRef]);\n  var handleUpdatePosition = useCallback(function () {\n    var _triggerRef$current5;\n\n    (_triggerRef$current5 = triggerRef.current) === null || _triggerRef$current5 === void 0 ? void 0 : _triggerRef$current5.updatePosition();\n  }, [triggerRef]);\n\n  if (!disabled) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useImperativeHandle(ref, function () {\n      return {\n        get root() {\n          var _triggerRef$current6;\n\n          return rootRef !== null && rootRef !== void 0 && rootRef.current ? rootRef === null || rootRef === void 0 ? void 0 : rootRef.current : (_triggerRef$current6 = triggerRef.current) === null || _triggerRef$current6 === void 0 ? void 0 : _triggerRef$current6.root;\n        },\n\n        get overlay() {\n          return overlayRef.current;\n        },\n\n        get target() {\n          return targetRef === null || targetRef === void 0 ? void 0 : targetRef.current;\n        },\n\n        updatePosition: handleUpdatePosition,\n        open: handleOpen,\n        close: handleClose\n      };\n    });\n  }\n}","map":{"version":3,"sources":["/mnt/c/Users/moham/documents/CSE 3311/Team9Project/node_modules/rsuite/esm/Picker/utils.js"],"names":["_objectWithoutPropertiesLoose","React","useState","useImperativeHandle","useCallback","kebabCase","trim","isFunction","isUndefined","omit","find","findNodeOfTree","filterNodesOfTree","KEY_VALUES","useClassNames","shallowEqual","reactToString","placementPolyfill","defaultNodeKeys","valueKey","childrenKey","createConcatChildrenFunction","node","nodeValue","nodeKeys","_nodeKeys","data","children","item","concat","shouldDisplay","label","searchKeyword","keyword","toLocaleLowerCase","indexOf","isValidElement","nodes","join","usePickerClassName","props","_withClassPrefix","name","classPrefix","className","placement","appearance","cleanable","block","disabled","countable","readOnly","plaintext","hasValue","rest","_useClassNames","withClassPrefix","merge","classes","usedClassNamePropKeys","Object","keys","onMenuKeyDown","event","events","down","up","enter","del","esc","right","left","key","DOWN","preventDefault","UP","ENTER","BACKSPACE","ESC","TAB","LEFT","RIGHT","useFocusItemValue","defaultFocusItemValue","_props$valueKey","_props$focusableQuery","focusableQueryKey","_props$defaultLayer","defaultLayer","target","rtl","callback","_useState","focusItemValue","setFocusItemValue","_useState2","layer","setLayer","_useState3","setKeys","getFocusableMenuItems","menu","currentKeys","length","_Array$from","Array","from","querySelectorAll","map","_item$dataset","dataset","i","findFocusItemIndex","items","_items$i","focusNextMenuItem","index","nextIndex","focusItem","focusPrevMenuItem","getSubMenuKeys","nextLayer","subMenu","querySelector","_Array$from2","_item$dataset2","focusNextLevelMenu","nextKeys","focusPrevLevelMenu","_focusItem$parent","parentItemValue","parent","handleKeyDown","_onMenuKeyDown","onKeyDown","useToggleKeyDownEvent","_props$toggle","toggle","triggerRef","targetRef","overlayRef","searchInputRef","active","onExit","onOpen","onClose","onMenuPressEnter","onMenuPressBackspace","handleClose","_triggerRef$current","_triggerRef$current$c","current","close","call","handleOpen","_triggerRef$current2","_triggerRef$current2$","open","handleToggleDropdown","onToggle","test","_searchInputRef$curre","focus","useSearch","labelKey","searchBy","_useState4","setSearchKeyword","checkShouldDisplay","_keyword","updateFilteredData","nextData","setFilteredData","_useState5","filteredData","handleSearch","usePublicMethods","ref","_ref","rootRef","_triggerRef$current3","_triggerRef$current4","handleUpdatePosition","_triggerRef$current5","updatePosition","root","_triggerRef$current6","overlay"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useState, useImperativeHandle, useCallback } from 'react';\nimport kebabCase from 'lodash/kebabCase';\nimport trim from 'lodash/trim';\nimport isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\nimport omit from 'lodash/omit';\nimport find from 'lodash/find';\nimport { findNodeOfTree, filterNodesOfTree } from '../utils/treeUtils';\nimport { KEY_VALUES, useClassNames, shallowEqual, reactToString, placementPolyfill } from '../utils';\nvar defaultNodeKeys = {\n  valueKey: 'value',\n  childrenKey: 'children'\n};\nexport function createConcatChildrenFunction(node, nodeValue, nodeKeys) {\n  if (nodeKeys === void 0) {\n    nodeKeys = defaultNodeKeys;\n  }\n\n  var _nodeKeys = nodeKeys,\n      valueKey = _nodeKeys.valueKey,\n      childrenKey = _nodeKeys.childrenKey;\n  return function (data, children) {\n    if (nodeValue) {\n      node = findNodeOfTree(data, function (item) {\n        return nodeValue === item[valueKey];\n      });\n    }\n\n    node[childrenKey] = children;\n    return data.concat([]);\n  };\n}\nexport function shouldDisplay(label, searchKeyword) {\n  if (!trim(searchKeyword)) {\n    return true;\n  }\n\n  var keyword = searchKeyword.toLocaleLowerCase();\n\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\"\" + label).toLocaleLowerCase().indexOf(keyword) >= 0;\n  } else if ( /*#__PURE__*/React.isValidElement(label)) {\n    var nodes = reactToString(label);\n    return nodes.join('').toLocaleLowerCase().indexOf(keyword) >= 0;\n  }\n\n  return false;\n}\n\n/**\n * The className of the assembled Toggle is on the Picker.\n */\nexport function usePickerClassName(props) {\n  var _withClassPrefix;\n\n  var name = props.name,\n      classPrefix = props.classPrefix,\n      className = props.className,\n      placement = props.placement,\n      appearance = props.appearance,\n      cleanable = props.cleanable,\n      block = props.block,\n      disabled = props.disabled,\n      countable = props.countable,\n      readOnly = props.readOnly,\n      plaintext = props.plaintext,\n      hasValue = props.hasValue,\n      rest = _objectWithoutPropertiesLoose(props, [\"name\", \"classPrefix\", \"className\", \"placement\", \"appearance\", \"cleanable\", \"block\", \"disabled\", \"countable\", \"readOnly\", \"plaintext\", \"hasValue\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      withClassPrefix = _useClassNames.withClassPrefix,\n      merge = _useClassNames.merge;\n\n  var classes = merge(className, withClassPrefix(name, appearance, 'toggle-wrapper', (_withClassPrefix = {}, _withClassPrefix[\"placement-\" + kebabCase(placementPolyfill(placement))] = placement, _withClassPrefix['read-only'] = readOnly, _withClassPrefix['has-value'] = hasValue, _withClassPrefix.cleanable = hasValue && cleanable, _withClassPrefix.block = block, _withClassPrefix.disabled = disabled, _withClassPrefix.countable = countable, _withClassPrefix.plaintext = plaintext, _withClassPrefix)));\n  var usedClassNamePropKeys = Object.keys(omit(props, [].concat(Object.keys(rest || {}), ['disabled', 'readOnly', 'plaintext'])));\n  return [classes, usedClassNamePropKeys];\n}\n\n/**\n * Handling keyboard events...\n * @param event Keyboard event object\n * @param events Event callback functions\n */\nexport function onMenuKeyDown(event, events) {\n  var down = events.down,\n      up = events.up,\n      enter = events.enter,\n      del = events.del,\n      esc = events.esc,\n      right = events.right,\n      left = events.left;\n\n  switch (event.key) {\n    // down\n    case KEY_VALUES.DOWN:\n      down === null || down === void 0 ? void 0 : down(event);\n      event.preventDefault();\n      break;\n    // up\n\n    case KEY_VALUES.UP:\n      up === null || up === void 0 ? void 0 : up(event);\n      event.preventDefault();\n      break;\n    // enter\n\n    case KEY_VALUES.ENTER:\n      enter === null || enter === void 0 ? void 0 : enter(event);\n      event.preventDefault();\n      break;\n    // delete\n\n    case KEY_VALUES.BACKSPACE:\n      del === null || del === void 0 ? void 0 : del(event);\n      break;\n    // esc | tab\n\n    case KEY_VALUES.ESC:\n    case KEY_VALUES.TAB:\n      esc === null || esc === void 0 ? void 0 : esc(event);\n      break;\n    // left arrow\n\n    case KEY_VALUES.LEFT:\n      left === null || left === void 0 ? void 0 : left(event);\n      break;\n    // right arrow\n\n    case KEY_VALUES.RIGHT:\n      right === null || right === void 0 ? void 0 : right(event);\n      break;\n\n    default:\n  }\n}\n\n/**\n * A hook that manages the focus state of the option.\n * @param defaultFocusItemValue\n * @param props\n */\nexport var useFocusItemValue = function useFocusItemValue(defaultFocusItemValue, props) {\n  var _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$focusableQuery = props.focusableQueryKey,\n      focusableQueryKey = _props$focusableQuery === void 0 ? '[data-key][aria-disabled=\"false\"]' : _props$focusableQuery,\n      _props$defaultLayer = props.defaultLayer,\n      defaultLayer = _props$defaultLayer === void 0 ? 0 : _props$defaultLayer,\n      data = props.data,\n      target = props.target,\n      rtl = props.rtl,\n      callback = props.callback;\n\n  var _useState = useState(defaultFocusItemValue),\n      focusItemValue = _useState[0],\n      setFocusItemValue = _useState[1];\n\n  var _useState2 = useState(defaultLayer),\n      layer = _useState2[0],\n      setLayer = _useState2[1];\n\n  var _useState3 = useState([]),\n      keys = _useState3[0],\n      setKeys = _useState3[1];\n  /**\n   * Get the elements visible in all options.\n   */\n\n\n  var getFocusableMenuItems = useCallback(function () {\n    if (!target) {\n      return [];\n    }\n\n    var menu = isFunction(target) ? target() : target;\n    var currentKeys = keys;\n\n    if (currentKeys.length === 0) {\n      var _Array$from;\n\n      currentKeys = (_Array$from = Array.from(menu === null || menu === void 0 ? void 0 : menu.querySelectorAll(focusableQueryKey))) === null || _Array$from === void 0 ? void 0 : _Array$from.map(function (item) {\n        var _item$dataset;\n\n        return item === null || item === void 0 ? void 0 : (_item$dataset = item.dataset) === null || _item$dataset === void 0 ? void 0 : _item$dataset.key;\n      });\n      setKeys(currentKeys);\n    }\n\n    if (currentKeys.length === 0) {\n      return [];\n    } // 1. It is necessary to traverse the `keys` instead of `data` here to preserve the order of the array.\n    // 2. The values ​​in `keys` are all string, so the corresponding value of `data` should also be converted to string\n\n\n    return currentKeys.map(function (key) {\n      return find(data, function (i) {\n        return \"\" + i[valueKey] === key;\n      });\n    });\n  }, [data, focusableQueryKey, keys, target, valueKey]);\n  /**\n   * Get the index of the focus item.\n   */\n\n  var findFocusItemIndex = useCallback(function (callback) {\n    var items = getFocusableMenuItems();\n\n    for (var i = 0; i < items.length; i += 1) {\n      var _items$i;\n\n      if (shallowEqual(focusItemValue, (_items$i = items[i]) === null || _items$i === void 0 ? void 0 : _items$i[valueKey])) {\n        callback(items, i);\n        return;\n      }\n    }\n\n    callback(items, -1);\n  }, [focusItemValue, getFocusableMenuItems, valueKey]);\n  var focusNextMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index + 2 > items.length ? 0 : index + 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var focusPrevMenuItem = useCallback(function (event) {\n    findFocusItemIndex(function (items, index) {\n      var nextIndex = index === 0 ? items.length - 1 : index - 1;\n      var focusItem = items[nextIndex];\n\n      if (!isUndefined(focusItem)) {\n        setFocusItemValue(focusItem[valueKey]);\n        callback === null || callback === void 0 ? void 0 : callback(focusItem[valueKey], event);\n      }\n    });\n  }, [callback, findFocusItemIndex, valueKey]);\n  var getSubMenuKeys = useCallback(function (nextLayer) {\n    var menu = isFunction(target) ? target() : target;\n    var subMenu = menu === null || menu === void 0 ? void 0 : menu.querySelector(\"[data-layer=\\\"\" + nextLayer + \"\\\"]\");\n\n    if (subMenu) {\n      var _Array$from2;\n\n      return (_Array$from2 = Array.from(subMenu.querySelectorAll(focusableQueryKey))) === null || _Array$from2 === void 0 ? void 0 : _Array$from2.map(function (item) {\n        var _item$dataset2;\n\n        return item === null || item === void 0 ? void 0 : (_item$dataset2 = item.dataset) === null || _item$dataset2 === void 0 ? void 0 : _item$dataset2.key;\n      });\n    }\n\n    return null;\n  }, [focusableQueryKey, target]);\n  var focusNextLevelMenu = useCallback(function (event) {\n    var nextLayer = layer + 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      setFocusItemValue(nextKeys[0]);\n      callback === null || callback === void 0 ? void 0 : callback(nextKeys[0], event);\n    }\n  }, [callback, getSubMenuKeys, layer]);\n  var focusPrevLevelMenu = useCallback(function (event) {\n    var nextLayer = layer - 1;\n    var nextKeys = getSubMenuKeys(nextLayer);\n\n    if (nextKeys) {\n      var _focusItem$parent;\n\n      setKeys(nextKeys);\n      setLayer(nextLayer);\n      var focusItem = findNodeOfTree(data, function (item) {\n        return item[valueKey] === focusItemValue;\n      });\n      var parentItemValue = focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey];\n\n      if (parentItemValue) {\n        setFocusItemValue(parentItemValue);\n        callback === null || callback === void 0 ? void 0 : callback(parentItemValue, event);\n      }\n    }\n  }, [callback, data, focusItemValue, getSubMenuKeys, layer, valueKey]);\n  var handleKeyDown = useCallback(function (event) {\n    var _onMenuKeyDown;\n\n    onMenuKeyDown(event, (_onMenuKeyDown = {\n      down: focusNextMenuItem,\n      up: focusPrevMenuItem\n    }, _onMenuKeyDown[rtl ? 'left' : 'right'] = focusNextLevelMenu, _onMenuKeyDown[rtl ? 'right' : 'left'] = focusPrevLevelMenu, _onMenuKeyDown));\n  }, [focusNextLevelMenu, focusNextMenuItem, focusPrevLevelMenu, focusPrevMenuItem, rtl]);\n  return {\n    focusItemValue: focusItemValue,\n    setFocusItemValue: setFocusItemValue,\n    layer: layer,\n    setLayer: setLayer,\n    keys: keys,\n    setKeys: setKeys,\n    onKeyDown: handleKeyDown\n  };\n};\n\n/**\n * A hook to control the toggle keyboard operation\n * @param props\n */\nexport var useToggleKeyDownEvent = function useToggleKeyDownEvent(props) {\n  var _props$toggle = props.toggle,\n      toggle = _props$toggle === void 0 ? true : _props$toggle,\n      triggerRef = props.triggerRef,\n      targetRef = props.targetRef,\n      overlayRef = props.overlayRef,\n      searchInputRef = props.searchInputRef,\n      active = props.active,\n      onExit = props.onExit,\n      onOpen = props.onOpen,\n      onClose = props.onClose,\n      onKeyDown = props.onKeyDown,\n      onMenuKeyDown = props.onMenuKeyDown,\n      onMenuPressEnter = props.onMenuPressEnter,\n      onMenuPressBackspace = props.onMenuPressBackspace;\n  var handleClose = useCallback(function () {\n    var _triggerRef$current, _triggerRef$current$c;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n  }, [onClose, triggerRef]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n  }, [onOpen, triggerRef]);\n  var handleToggleDropdown = useCallback(function () {\n    if (active) {\n      handleClose();\n      return;\n    }\n\n    handleOpen();\n  }, [active, handleOpen, handleClose]);\n  var onToggle = useCallback(function (event) {\n    if (event.target === (targetRef === null || targetRef === void 0 ? void 0 : targetRef.current)) {\n      // enter\n      if (toggle && event.key === KEY_VALUES.ENTER) {\n        handleToggleDropdown();\n      } // delete\n\n\n      if (event.key === KEY_VALUES.BACKSPACE) {\n        onExit === null || onExit === void 0 ? void 0 : onExit(event);\n      }\n    }\n\n    if (overlayRef !== null && overlayRef !== void 0 && overlayRef.current) {\n      // The keyboard operation callback on the menu.\n      onMenuKeyDown === null || onMenuKeyDown === void 0 ? void 0 : onMenuKeyDown(event);\n\n      if (event.key === KEY_VALUES.ENTER) {\n        onMenuPressEnter === null || onMenuPressEnter === void 0 ? void 0 : onMenuPressEnter(event);\n      }\n      /**\n       * There is no callback when typing the Backspace key in the search box.\n       * The default is to remove search keywords\n       */\n\n\n      if (event.key === KEY_VALUES.BACKSPACE && event.target !== (searchInputRef === null || searchInputRef === void 0 ? void 0 : searchInputRef.current)) {\n        onMenuPressBackspace === null || onMenuPressBackspace === void 0 ? void 0 : onMenuPressBackspace(event);\n      } // The search box gets focus when typing characters and numbers.\n\n\n      if (event.key.length === 1 && /\\w/.test(event.key)) {\n        var _searchInputRef$curre;\n\n        searchInputRef === null || searchInputRef === void 0 ? void 0 : (_searchInputRef$curre = searchInputRef.current) === null || _searchInputRef$curre === void 0 ? void 0 : _searchInputRef$curre.focus();\n      }\n    }\n\n    if (event.key === KEY_VALUES.ESC || event.key === KEY_VALUES.TAB) {\n      handleClose();\n    } // Native event callback\n\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  }, [handleClose, handleToggleDropdown, overlayRef, onExit, onKeyDown, onMenuKeyDown, onMenuPressBackspace, onMenuPressEnter, toggle, targetRef, searchInputRef]);\n  return onToggle;\n};\n\n/**\n * A hook that handles search filter options\n * @param props\n */\nexport function useSearch(props) {\n  var labelKey = props.labelKey,\n      data = props.data,\n      searchBy = props.searchBy,\n      callback = props.callback; // Use search keywords to filter options.\n\n  var _useState4 = useState(''),\n      searchKeyword = _useState4[0],\n      setSearchKeyword = _useState4[1];\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n\n  var checkShouldDisplay = useCallback(function (item, keyword) {\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n\n    var _keyword = isUndefined(keyword) ? searchKeyword : keyword;\n\n    if (typeof searchBy === 'function') {\n      return searchBy(_keyword, label, item);\n    }\n\n    return shouldDisplay(label, _keyword);\n  }, [labelKey, searchBy, searchKeyword]);\n  var updateFilteredData = useCallback(function (nextData) {\n    setFilteredData(filterNodesOfTree(nextData, function (item) {\n      return checkShouldDisplay(item);\n    }));\n  }, [checkShouldDisplay]);\n\n  var _useState5 = useState(filterNodesOfTree(data, function (item) {\n    return checkShouldDisplay(item);\n  })),\n      filteredData = _useState5[0],\n      setFilteredData = _useState5[1];\n\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterNodesOfTree(data, function (item) {\n      return checkShouldDisplay(item, searchKeyword);\n    });\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n  };\n\n  return {\n    searchKeyword: searchKeyword,\n    filteredData: filteredData,\n    updateFilteredData: updateFilteredData,\n    setSearchKeyword: setSearchKeyword,\n    checkShouldDisplay: checkShouldDisplay,\n    handleSearch: handleSearch\n  };\n}\n\n/**\n * A hook of the exposed method of Picker\n *\n * {\n *   root: Element;\n *   overlay: Element;\n *   target?: Element;\n *   updatePosition:() => void;\n *   open:() => void;\n *   close:() => void;\n * }\n * @param ref\n * @param params\n */\nexport function usePublicMethods(ref, _ref, disabled) {\n  var triggerRef = _ref.triggerRef,\n      overlayRef = _ref.overlayRef,\n      targetRef = _ref.targetRef,\n      rootRef = _ref.rootRef;\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current3;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : _triggerRef$current3.open();\n  }, [triggerRef]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current4;\n\n    (_triggerRef$current4 = triggerRef.current) === null || _triggerRef$current4 === void 0 ? void 0 : _triggerRef$current4.close();\n  }, [triggerRef]);\n  var handleUpdatePosition = useCallback(function () {\n    var _triggerRef$current5;\n\n    (_triggerRef$current5 = triggerRef.current) === null || _triggerRef$current5 === void 0 ? void 0 : _triggerRef$current5.updatePosition();\n  }, [triggerRef]);\n\n  if (!disabled) {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useImperativeHandle(ref, function () {\n      return {\n        get root() {\n          var _triggerRef$current6;\n\n          return rootRef !== null && rootRef !== void 0 && rootRef.current ? rootRef === null || rootRef === void 0 ? void 0 : rootRef.current : (_triggerRef$current6 = triggerRef.current) === null || _triggerRef$current6 === void 0 ? void 0 : _triggerRef$current6.root;\n        },\n\n        get overlay() {\n          return overlayRef.current;\n        },\n\n        get target() {\n          return targetRef === null || targetRef === void 0 ? void 0 : targetRef.current;\n        },\n\n        updatePosition: handleUpdatePosition,\n        open: handleOpen,\n        close: handleClose\n      };\n    });\n  }\n}"]},"metadata":{},"sourceType":"module"}